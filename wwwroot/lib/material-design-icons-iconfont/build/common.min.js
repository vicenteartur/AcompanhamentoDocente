/**
 * Minified by jsDelivr using Terser v5.3.0.
 * Original file: /npm/material-design-icons-iconfont@6.1.0/build/common.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
const fs=require("fs"),path=require("path"),mkdirp=require("mkdirp"),{promisify:promisify}=require("util"),sass=require("node-sass"),request=require("request"),rp=require("request-promise-native"),fontkit=require("fontkit"),sha256File=require("sha256-file"),crypto=require("crypto"),sortByKeys=require("sort-keys"),DIST_DIR_PATH=path.resolve(__dirname,"..","dist"),FONTS_DIR_PATH=path.resolve(DIST_DIR_PATH,"fonts"),SRC_DIR_PATH=path.resolve(__dirname,"..","src"),USER_AGENTS="\nMozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.1.3) Gecko/20090913 Firefox/3.5.3\nMozilla/5.0 (Windows; U; Windows NT 6.1; en; rv:1.9.1.3) Gecko/20090824 Firefox/3.5.3 (.NET CLR 3.5.30729)\nMozilla/5.0 (Windows; U; Windows NT 5.2; en-US; rv:1.9.1.3) Gecko/20090824 Firefox/3.5.3 (.NET CLR 3.5.30729)\nMozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.1) Gecko/20090718 Firefox/3.5.1\nMozilla/5.0 (Windows; U; Windows NT 5.1; en-US) AppleWebKit/532.1 (KHTML, like Gecko) Chrome/4.0.219.6 Safari/532.1\nMozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; WOW64; Trident/4.0; SLCC2; .NET CLR 2.0.50727; InfoPath.2)\nMozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.0; Trident/4.0; SLCC1; .NET CLR 2.0.50727; .NET CLR 1.1.4322; .NET CLR 3.5.30729; .NET CLR 3.0.30729)\nMozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.2; Win64; x64; Trident/4.0)\nMozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0; SV1; .NET CLR 2.0.50727; InfoPath.2)Mozilla/5.0 (Windows; U; MSIE 7.0; Windows NT 6.0; en-US)\nMozilla/4.0 (compatible; MSIE 6.1; Windows XP)\nMozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/42.0.2311.135 Safari/537.36 Edge/12.246\nMozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2227.0 Safari/537.36\nMozilla/5.0 (Macintosh; U; Intel Mac OS X 10_6_7; da-dk) AppleWebKit/533.21.1 (KHTML, like Gecko) Version/5.0.5 Safari/533.21.1\nOpera/9.80 (Windows NT 6.1; U; es-ES) Presto/2.9.181 Version/12.00\nMozilla/5.0 (Linux; U; Android 2.3.4; fr-fr; HTC Desire Build/GRJ22) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1\nMozilla/5.0 (Linux; Android 7.0; SAMSUNG SM-N920C Build/NRD90M) AppleWebKit/537.36 (KHTML, like Gecko) SamsungBrowser/6.2 Chrome/56.0.2924.87 Mobile Safari/537.36\nMozilla/5.0 (Windows NT 6.1) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.43 BIDUBrowser/2.x Safari/537.31\nMozilla/5.0 (Linux; U; Android 4.4.2; zh-cn; GT-I9500 Build/KOT49H) AppleWebKit/537.36 (KHTML, like Gecko)Version/4.0 MQQBrowser/5.0 QQ-URL-Manager Mobile Safari/537.36\nMozilla/5.0 (Android 8.0.0; Tablet; rv:57.0) Gecko/57.0 Firefox/57.0\nMozilla/5.0 (Android 8.1.0; Mobile; rv:61.0) Gecko/61.0 Firefox/61.0\n".split("\n").filter(e=>!!e).map(e=>e.trim());async function readFontLigatures(e){let i=await promisify(fontkit.open)(e);console.log(`processing version="${i.version}" postscript name="${i.postscriptName}" full name="${i.fullName}" family name="${i.familyName}" copyright="${i.copyright}" subfamily name="${i.subfamilyName}"`);let o=i.GSUB.lookupList.toArray(),a=i.GSUB.featureList[0].feature.lookupListIndexes,r={};return a.forEach(e=>{let a=o[e].subTables[0],s=[];a.coverage.rangeRecords.forEach(e=>{for(let o=e.start;o<=e.end;o++){let e=i.stringsForGlyph(o)[0];s.push(e)}}),a.ligatureSets.toArray().forEach((e,o)=>{let a=s[o];e.forEach(e=>{let o=i.stringsForGlyph(e.glyph)[0].charCodeAt(0).toString(16).toUpperCase();"DBFF"===o&&(o="EBFF");let s=e.components.map(e=>i.stringsForGlyph(e)[0]).join("");s=a+s,r[s]=o})})}),r}function downloadFile(e,i){return new Promise((o,a)=>{let r=fs.createWriteStream(i),s=request.get(e),t=e=>{fs.unlink(i,()=>{a(e&&e.message||e)})};s.on("response",e=>{if(400<=e.statusCode&&e.statusCode<600)return t("Invalid response status code "+e.statusCode);s.pipe(r)}),r.on("finish",()=>r.close(o)),s.on("error",t),r.on("error",t)})}async function writeVariablesSCSSFile(e,i){let o=Object.keys(i);o.sort();let a=`$material-icons-codepoints: () !default;\n$material-icons-codepoints: map-merge((\n${o.map(e=>`\t"${e}": ${i[e].toLowerCase()},`).join("\n")}\n), $material-icons-codepoints);`;await promisify(fs.writeFile)(e,a)}async function buildScss(e,i){console.log(`generating css file "${i}" ...`);let o=await promisify(sass.render)({file:e});await promisify(fs.writeFile)(i,o.css)}function calculateFileHash(e){return new Promise((i,o)=>{sha256File(e,(function(a,r){if(a)return o(a);i({path:e,hash:r})}))})}function calculateDirTreeHash(e,i){return new Promise((o,a)=>{void 0===i&&(i={}),i[e]="",fs.readdir(e,(r,s)=>{if(r)return a(r);let t=(s=s.sort()).map(i=>path.join(e,i)).map(e=>fs.lstatSync(e).isDirectory()?calculateDirTreeHash(e,i):calculateFileHash(e));Promise.all(t).then(e=>{e.forEach(e=>{e.hash&&(i[e.path]=e.hash)}),o(i)}).catch(a)})})}async function calculateDirHash(e){let i=await calculateDirTreeHash(e);return i=sortByKeys(i,{deep:!0}),i=JSON.stringify(i),crypto.createHash("sha256").update(i).digest("hex")}async function updateAndBuild(){await promisify(fs.exists)(FONTS_DIR_PATH)||await promisify(mkdirp)(FONTS_DIR_PATH);let e="MaterialIcons-Regular",i={};await Promise.all(USER_AGENTS.map(async e=>{let o={url:"https://fonts.googleapis.com/icon?family=Material+Icons",headers:{"User-Agent":e}},a=await rp.get(o),r=/url\((.*?)\)/g.exec(a)[1],s=r.substr(r.lastIndexOf(".")+1);i[s]=r})),await Promise.all(Object.keys(i).map(async o=>{let a=i[o],r=path.resolve(FONTS_DIR_PATH,`${e}.${o}`);if(console.log(`downloading "${r}" ...`),await downloadFile(a,r),"ttf"===o){let i=await readFontLigatures(r),o=path.resolve(FONTS_DIR_PATH,e+".json");console.log(`extracted mapping to "${o}" ...`),await promisify(fs.writeFile)(o,JSON.stringify(i,null,4));let a=path.resolve(SRC_DIR_PATH,"_variables.scss");console.log(`generating codepoints to "${a}" ...`),await writeVariablesSCSSFile(a,i);let s=path.resolve(SRC_DIR_PATH,"material-design-icons.scss"),t=path.resolve(DIST_DIR_PATH,"material-design-icons.css");await buildScss(s,t)}}))}module.exports.updateAndBuild=updateAndBuild,module.exports.calculateDirHash=calculateDirHash,module.exports.calculateFileHash=calculateFileHash,module.exports.DIST_DIR_PATH=DIST_DIR_PATH,module.exports.SRC_DIR_PATH=SRC_DIR_PATH;
//# sourceMappingURL=/sm/72c66dcca27f69514221fc79a9f9f62343509c7b55f1901f4fca57e857a2b907.map